<!DOCTYPE html>
<html>

<head>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link href='static/style.css' rel='stylesheet' type='text/css'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <title>Shoutbox</title>
</head>

<body>
  <div id="headerbar">
    <a href="index.html"><img id="logo" src="static/img/logo.png"></a>
    <div id="headertext">
      <li><a href="demo.html">demo</a></li>
      <li><a href="documentation">docs</a></li>
      <li><a href="contribute.html">contribute</a></li>
    </div>
  </div>
  <div id="wrapper">
    <br>
    <form action="#" id="submit">
      <input type="text" name="key" placeholder="key">
      <br>
      <input type="text" name="value" placeholder="value">
      <br>
      <input type="submit" value="Send">
    </form>
    <br>
    <form action="#" id="request">
      <input type="text" name="skey" value=0>
      <br>
      <input type="submit" value="Search">
    </form>
    <br>
    <div id="result"></div>
    <script>
    </script>


    <div id="result"></div>
    <script>
      $("#submit").submit(function(event) {
        event.preventDefault();

        var $form = $(this),
          key = $form.find("input[name='key']").val(),
          value = $form.find("input[name='value']").val(),
          url = '/api/set/shoutbox/'

        var posting = $.post(url, {
          Key: key,
          Value: value,
          Page: 0,
          App: "Shoutbox",
          User: "Demo"
        });

        posting.done(function(data) {
          $("#result").empty().append(data);
        });
      });
      $("#request").submit(function(event) {
        event.preventDefault();
        var $form = $(this),
          url = '/api/get/shoutbox/',
          term = $form.find("input[name='skey']").val(),
          posting = $.post(url, {
            Key: term,
            App: "Shoutbox",
            User: "Demo"
          });

        posting.done(function(data) {
		if (data === "") {
		  var returnString = "Not found!"
		} else {
          var returnString = "GET for " + JSON.stringify(data);
		}
          $("#result").empty().append(returnString);
        });
      });
    </script>
  </div>
</body>

</html>
